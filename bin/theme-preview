#!/usr/bin/env bash

# WayNotes Theme Preview Script
# Shows different styling options for the waybar module

set -e

# Colors
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
PURPLE='\033[0;35m'
CYAN='\033[0;36m'
WHITE='\033[1;37m'
NC='\033[0m'

# Theme definitions
declare -A themes=(
    ["modern-glass"]="margin: 0 8px; padding: 6px 12px; background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border-radius: 12px; border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);"
    ["dark-gradient"]="margin: 0 6px; padding: 5px 10px; background: linear-gradient(135deg, rgba(59, 130, 246, 0.8), rgba(147, 51, 234, 0.8)); border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.1); box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);"
    ["minimalist"]="margin: 0 4px; padding: 4px 8px; background-color: rgba(0, 0, 0, 0.4); border-radius: 6px; border-left: 3px solid #3b82f6;"
    ["neon-glow"]="margin: 0 8px; padding: 6px 12px; background: rgba(0, 0, 0, 0.8); border-radius: 10px; border: 1px solid #00ff88; box-shadow: 0 0 10px rgba(0, 255, 136, 0.5);"
    ["material"]="margin: 0 6px; padding: 6px 12px; background: rgba(255, 255, 255, 0.15); border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); border: none;"
    ["cyberpunk"]="margin: 0 8px; padding: 5px 10px; background: linear-gradient(45deg, #ff006e, #8338ec); border-radius: 4px; border: 1px solid #ff006e; box-shadow: 0 0 15px rgba(255, 0, 110, 0.3);"
    ["elegant-dark"]="margin: 0 5px; padding: 4px 10px; background: rgba(17, 24, 39, 0.9); border-radius: 12px; border: 1px solid rgba(156, 163, 175, 0.2); box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);"
    ["sunset"]="margin: 0 6px; padding: 5px 10px; background: linear-gradient(135deg, #ff6b6b, #feca57); border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);"
    ["ocean"]="margin: 0 6px; padding: 5px 10px; background: linear-gradient(135deg, #48cae4, #023e8a); border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);"
    ["forest"]="margin: 0 6px; padding: 5px 10px; background: linear-gradient(135deg, #52b788, #081c15); border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);"
)

# Theme descriptions
declare -A descriptions=(
    ["modern-glass"]="Elegant glass morphism with blur effect"
    ["dark-gradient"]="Beautiful gradient with dark theme"
    ["minimalist"]="Clean and minimal design"
    ["neon-glow"]="Cyberpunk style with neon glow"
    ["material"]="Google Material Design inspired"
    ["cyberpunk"]="Futuristic cyberpunk style"
    ["elegant-dark"]="Sophisticated dark theme"
    ["sunset"]="Warm sunset gradient"
    ["ocean"]="Calming ocean blue theme"
    ["forest"]="Natural green forest theme"
)

show_help() {
    echo -e "${CYAN}WayNotes Theme Preview${NC}"
    echo "========================"
    echo ""
    echo "Usage: $0 [THEME_NAME]"
    echo ""
    echo "Available themes:"
    for theme in "${!themes[@]}"; do
        echo -e "  ${GREEN}$theme${NC} - ${descriptions[$theme]}"
    done
    echo ""
    echo "Examples:"
    echo "  $0 modern-glass"
    echo "  $0 neon-glow"
    echo "  $0 --list"
    echo ""
}

show_theme_css() {
    local theme_name="$1"
    
    if [[ -z "${themes[$theme_name]}" ]]; then
        echo -e "${RED}Error: Theme '$theme_name' not found${NC}"
        echo "Use '$0 --list' to see available themes"
        exit 1
    fi
    
    echo -e "${CYAN}Theme: ${WHITE}$theme_name${NC}"
    echo -e "${CYAN}Description: ${WHITE}${descriptions[$theme_name]}${NC}"
    echo ""
    echo -e "${YELLOW}CSS for waybar config:${NC}"
    echo "\"css\": \"${themes[$theme_name]}\""
    echo ""
    echo -e "${YELLOW}Complete waybar config:${NC}"
    cat << EOF
"custom/waynotes": {
    "exec": "waybar-notes display cycle",
    "on-click": "waybar-notes click 1",
    "on-click-middle": "waybar-notes click 2",
    "on-click-right": "waybar-notes click 3",
    "interval": 5,
    "format": "{}",
    "tooltip": true,
    "tooltip-format": "Recent Notes",
    "class": "waynotes",
    "css": "${themes[$theme_name]}"
}
EOF
}

list_themes() {
    echo -e "${CYAN}Available WayNotes Themes:${NC}"
    echo "================================"
    echo ""
    for theme in "${!themes[@]}"; do
        echo -e "${GREEN}$theme${NC}"
        echo -e "  ${GRAY}${descriptions[$theme]}${NC}"
        echo ""
    done
}

# Main script
case "${1:-}" in
    -h|--help)
        show_help
        ;;
    --list)
        list_themes
        ;;
    "")
        show_help
        ;;
    *)
        show_theme_css "$1"
        ;;
esac
